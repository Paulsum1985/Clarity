<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Debt Snowball Calculator | Avalanche vs Snowball | Free Payoff Planner</title>
    <meta name="description" content="Free Debt Snowball & Avalanche Calculator. Create a custom payoff plan, calculate your debt-free date, and simulate interest savings instantly. Private & Secure.">
    
    <!-- CRITICAL SEO TAG: Canonical URL -->
    <link rel="canonical" href="https://www.clarity-decisions.com/">

    <!-- PWA Manifest (Makes it installable) -->
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQ2xhcml0eSBEZWNpc2lvbnMiLCJzaG9ydF9uYW1lIjoiQ2xhcml0eSIsInN0YXJ0X3VybCI6Ii8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjMDIwNjE3IiwidGhlbWVfY29sb3IiOiIjM2I4MmY2IiwiaWNvbnMiOlt7InNyYyI6Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vNTEyLzI1MzQvMjUzNDIyMS5wbmciLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiaW1hZ2UvcG5nIn1dfQ==">
    <meta name="theme-color" content="#020617">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Open Graph / Facebook / WhatsApp -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.clarity-decisions.com/">
    <meta property="og:title" content="Get Clarity on Your Debt. Make the Decision to be Free.">
    <meta property="og:description" content="Use the free Clarity Calculator to visualize your debt-free date. No signup required.">
    <meta property="og:image" content="https://clarity-decisions.com/share-card.png">

    <!-- Dynamic Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìä</text></svg>">

    <!-- Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FinancialProduct",
      "name": "Clarity Debt Snowball Calculator",
      "description": "Calculates debt free date using snowball and avalanche methods.",
      "brand": { "@type": "Brand", "name": "Clarity Decisions" },
      "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Web"
    }
    </script>

    <!-- Schema.org: FAQ -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "What is the Debt Snowball method?",
        "acceptedAnswer": { "@type": "Answer", "text": "The Debt Snowball method involves paying off your debts from smallest balance to largest balance, regardless of interest rate. This builds psychological momentum." }
      }, {
        "@type": "Question",
        "name": "Is Avalanche or Snowball better?",
        "acceptedAnswer": { "@type": "Answer", "text": "Mathematically, the Avalanche method (highest interest first) saves more money. However, the Snowball method (lowest balance first) has a higher success rate due to psychological wins." }
      }, {
        "@type": "Question",
        "name": "Does this calculator store my data?",
        "acceptedAnswer": { "@type": "Answer", "text": "No. Clarity Decisions runs entirely in your web browser (Client-Side). Your financial data never leaves your device." }
      }]
    }
    </script>

    <!-- Google Font: Plus Jakarta Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            /* Palette */
            --bg-dark: #020617;       
            --bg-card: #0f172a;       
            --primary: #3b82f6;       
            --accent: #06b6d4;        
            --text-main: #f8fafc;     
            --text-muted: #94a3b8;    
            --border: #1e293b;        
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(6, 182, 212, 0.08) 0%, transparent 25%);
            background-attachment: fixed;
        }

        /* --- Navbar --- */
        nav {
            background: rgba(2, 6, 23, 0.95);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            padding: 12px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .logo { 
            font-weight: 800; font-size: 1.3rem; letter-spacing: -0.5px;
            color: white; display: flex; align-items: center; gap: 10px;
        }
        .logo i { background: linear-gradient(135deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* Currency Switcher */
        .currency-switch {
            display: flex; background: #1e293b; padding: 3px; border-radius: 8px; border: 1px solid var(--border);
        }
        .curr-btn {
            padding: 5px 12px; font-size: 0.85rem; font-weight: 700; color: var(--text-muted); cursor: pointer; border-radius: 6px; transition: 0.2s;
        }
        .curr-btn:hover { color: white; }
        .curr-btn.active { background: var(--primary); color: white; }

        /* --- Hero Section --- */
        .hero {
            text-align: center;
            padding: 40px 20px 20px;
            position: relative;
        }
        .hero h1 {
            font-size: 2.5rem; letter-spacing: -1.5px; margin: 0 0 10px 0; line-height: 1.1;
        }
        .hero h1 span {
            background: linear-gradient(135deg, #60a5fa 0%, #22d3ee 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }
        
        .main-tagline {
            font-size: 1.2rem; font-weight: 600; color: white; margin: 0 auto 5px;
            font-style: italic; max-width: 700px;
        }
        .sub-tagline {
            font-size: 0.95rem; color: var(--text-muted); max-width: 550px; margin: 0 auto 20px;
        }
        
        .trust-wrapper { opacity: 0.6; margin-bottom: 20px; }
        .trust-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; color: var(--text-muted); }
        .trust-bar { display: flex; justify-content: center; gap: 30px; filter: grayscale(100%); }
        .trust-bar i { font-size: 1.5rem; transition: 0.3s; }
        .trust-bar i:hover { filter: grayscale(0%); color: white; }

        /* --- Main App Grid --- */
        .app-container {
            max-width: 1200px;
            margin: 0 auto 60px;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr 1fr; /* Two Equal Columns for top */
            gap: 30px;
        }
        /* Full width span for the action plan */
        .full-width-card {
            grid-column: 1 / -1;
        }

        @media(max-width: 960px) { 
            .app-container { grid-template-columns: 1fr; gap: 40px; }
            .full-width-card { grid-column: 1; }
        }

        /* --- Cards --- */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 30px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .card::before {
            content:''; position: absolute; top:0; left:0; right:0; height:1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.5), transparent);
        }

        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .card-title { font-size: 1.2rem; font-weight: 700; color: white; display: flex; align-items: center; gap: 12px; }

        /* --- Strategy Toggle --- */
        .strategy-toggle { display: flex; background: #020617; padding: 4px; border-radius: 12px; margin-bottom: 20px; border: 1px solid var(--border); }
        .toggle-opt {
            flex: 1; text-align: center; padding: 10px; font-size: 0.9rem; font-weight: 600; color: var(--text-muted); 
            cursor: pointer; border-radius: 8px; transition: 0.3s;
        }
        .toggle-opt.active { background: var(--bg-card); color: white; border: 1px solid var(--border); box-shadow: 0 4px 12px rgba(0,0,0,0.5); }

        /* --- Debt List --- */
        .debt-list { display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px; }
        .debt-row {
            display: grid; grid-template-columns: 1.5fr 1fr 0.8fr 0.8fr 40px; gap: 10px; align-items: end;
            padding: 12px; border: 1px solid var(--border); border-radius: 12px; background: rgba(2, 6, 23, 0.5); transition: 0.2s;
        }
        .debt-row:hover { border-color: var(--primary); transform: translateY(-1px); }
        
        @media(max-width: 600px) {
            .debt-row { grid-template-columns: 1fr 1fr; gap: 12px; position: relative; padding-top: 35px; }
            .col-name { grid-column: 1 / -1; }
            .col-del { position: absolute; top: 5px; right: 5px; }
        }

        .input-col label { font-size: 0.7rem; font-weight: 700; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; display: block; }
        input {
            width: 100%; padding: 10px; background: #0f172a; border: 1px solid var(--border); border-radius: 8px; 
            font-size: 0.95rem; font-family: inherit; color: white; font-weight: 500; transition: all 0.2s;
        }
        input:focus { border-color: var(--primary); box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); }

        .btn-add {
            width: 100%; padding: 12px; border: 1px dashed var(--border); background: transparent; color: var(--text-muted); 
            font-weight: 600; cursor: pointer; border-radius: 10px; transition: 0.2s;
        }
        .btn-add:hover { border-color: var(--primary); color: var(--primary); background: rgba(59, 130, 246, 0.05); }

        /* Range Slider */
        .slider-container { margin: 25px 0; }
        .slider-header { display: flex; justify-content: space-between; margin-bottom: 10px; }
        input[type=range] { -webkit-appearance: none; width: 100%; height: 6px; background: var(--border); border-radius: 5px; padding: 0; border: none; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: var(--primary); cursor: pointer; box-shadow: 0 0 10px rgba(59, 130, 246, 0.5); }

        .btn-primary {
            width: 100%; padding: 16px; background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white; border: none; border-radius: 12px; font-weight: 700; font-size: 1.1rem; cursor: pointer;
            box-shadow: 0 10px 20px -5px rgba(59, 130, 246, 0.4); transition: 0.2s; text-transform: uppercase; letter-spacing: 0.5px;
            position: relative; overflow: hidden;
        }
        .btn-primary::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: skewX(-20deg); transition: 0.5s;
        }
        .btn-primary:hover::after { left: 150%; transition: 0.7s; }

        /* --- Results Dashboard --- */
        .result-summary {
            text-align: center; padding: 30px; background: linear-gradient(180deg, rgba(59, 130, 246, 0.1) 0%, transparent 100%);
            border-radius: 16px; border: 1px solid rgba(59, 130, 246, 0.2); margin-bottom: 24px;
        }
        .freedom-date { 
            font-size: 2.8rem; font-weight: 800; line-height: 1.1; 
            background: linear-gradient(to right, #fff, #bfdbfe);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 5px;
        }
        .freedom-sub { font-size: 0.85rem; color: var(--text-muted); font-weight: 600; letter-spacing: 1px; text-transform: uppercase; }

        /* Badges */
        .metric-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .metric-box { padding: 10px; border-radius: 10px; font-size: 0.85rem; text-align: center; border: 1px solid transparent; }
        .metric-save { background: rgba(16, 185, 129, 0.15); color: #34d399; border-color: rgba(16, 185, 129, 0.3); }
        .metric-waste { background: rgba(239, 68, 68, 0.15); color: #f87171; border-color: rgba(239, 68, 68, 0.3); }
        .metric-val { display: block; font-weight: 800; font-size: 1.1rem; margin-top: 4px; }

        .comparison-bar {
            margin: 20px 0; background: #020617; border-radius: 8px; padding: 15px; border: 1px solid var(--border);
        }
        .bar-row { display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 6px; }
        .progress-track { width: 100%; height: 8px; background: #1e293b; border-radius: 4px; overflow: hidden; margin-bottom: 12px; }
        .progress-fill { height: 100%; border-radius: 4px; transition: width 1s ease-out; }

        .chart-container { height: 250px; width: 100%; margin-bottom: 20px; position: relative; }
        
        /* Plan List - now in Full Width Card */
        .plan-list { background: rgba(0,0,0,0.2); border-radius: 12px; padding: 5px; border: 1px solid var(--border); }
        .plan-step { padding: 15px; border-bottom: 1px solid var(--border); display: flex; align-items: flex-start; gap: 15px; }
        .step-num { 
            background: #1e293b; color: var(--primary); width: 24px; height: 24px; border-radius: 50%; border: 1px solid var(--border);
            display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; flex-shrink: 0;
        }
        
        .affiliate-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid rgba(234, 179, 8, 0.3); border-radius: 10px;
            padding: 12px; margin-top: 8px; display: flex; align-items: center; gap: 12px; transition: 0.2s; cursor: pointer;
        }
        .affiliate-card:hover { transform: translateX(5px); border-color: #facc15; }
        .aff-icon { color: #facc15; font-size: 1.2rem; }
        .aff-content { font-size: 0.85rem; color: #e2e8f0; }
        .aff-cta { font-size: 0.75rem; color: #facc15; font-weight: 700; text-transform: uppercase; margin-top: 2px; }

        /* Diagnosis Box */
        .diagnosis-box {
            background: #172554; border-left: 4px solid var(--primary);
            padding: 20px; margin-top: 20px; border-radius: 8px;
            font-size: 0.95rem; color: #dbeafe; line-height: 1.6;
        }
        .diagnosis-box strong { color: white; }

        /* --- SEO Content Blocks --- */
        .content-section {
            max-width: 900px; margin: 60px auto; padding: 40px 20px;
            background: #020617; border-top: 1px solid var(--border);
        }
        /* Table of Contents for Sitelinks */
        .toc-box { background: rgba(255,255,255,0.03); border: 1px solid var(--border); padding: 20px; border-radius: 12px; margin-bottom: 40px; }
        .toc-title { font-weight: 700; color: white; margin-bottom: 10px; }
        .toc-list { list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .toc-list li a { color: var(--primary); text-decoration: none; font-size: 0.9rem; }
        .toc-list li a:hover { text-decoration: underline; }

        .content-section h2 { font-size: 2rem; color: white; margin-bottom: 20px; letter-spacing: -0.5px; margin-top: 40px; }
        .content-section h3 { font-size: 1.3rem; color: white; margin-top: 30px; margin-bottom: 15px; }
        .content-section p { color: var(--text-muted); margin-bottom: 20px; font-size: 1.05rem; }
        .content-section ul { color: var(--text-muted); margin-bottom: 20px; padding-left: 20px; }
        .glossary-item { margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #1e293b; }
        .glossary-term { font-weight: 700; color: white; font-size: 1.1rem; margin-bottom: 5px; }
        
        /* Comparison Table */
        .compare-table { width: 100%; border-collapse: collapse; margin: 30px 0; border-radius: 12px; overflow: hidden; border: 1px solid var(--border); }
        .compare-table th { background: #0f172a; color: white; padding: 15px; text-align: left; font-size: 0.9rem; }
        .compare-table td { background: rgba(255,255,255,0.02); color: var(--text-muted); padding: 15px; border-bottom: 1px solid var(--border); font-size: 0.9rem; }
        .compare-table tr:last-child td { border-bottom: none; }
        
        .faq-item { border-bottom: 1px solid var(--border); padding: 20px 0; }
        .faq-q { font-weight: 600; color: white; cursor: pointer; display: flex; justify-content: space-between; font-size: 1.1rem; }
        .faq-a { margin-top: 15px; display: none; color: var(--text-muted); line-height: 1.6; }
        .faq-item.active .faq-a { display: block; }

        /* Loading Overlay */
        #loading-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(5px);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 10; border-radius: 20px; display: none;
        }
        .spinner {
            width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.1);
            border-left-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* Confetti Canvas */
        #confetti { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none; z-index: 5; }

        /* Footer */
        footer {
            text-align: center; padding: 40px 20px; border-top: 1px solid var(--border);
            color: var(--text-muted); font-size: 0.85rem; background: #0f172a;
        }

        /* Sticky CTA for Mobile */
        .mobile-cta {
            position: fixed; bottom: 20px; left: 20px; right: 20px; z-index: 900;
            display: none;
        }
        @media(max-width: 768px) { .mobile-cta { display: block; } }

    </style>
</head>
<body>

    <nav>
        <div class="logo">
            <i class="fas fa-layer-group"></i>&nbsp;Clarity
        </div>
        
        <div class="currency-switch">
            <div class="curr-btn active" id="curr-usd" onclick="setCurrency('$')">$</div>
            <div class="curr-btn" id="curr-gbp" onclick="setCurrency('¬£')">¬£</div>
            <div class="curr-btn" id="curr-eur" onclick="setCurrency('‚Ç¨')">‚Ç¨</div>
        </div>
    </nav>

    <header class="hero">
        <h1>Pay off your debt <br><span>Scientifically.</span></h1>
        
        <p class="main-tagline">"Get Clarity on your Debt. Make the Decision to be Free."</p>
        <p class="sub-tagline">The free, private calculator that uses the Snowball method to help save you thousands in interest.</p>
        
        <div class="trust-wrapper">
            <div class="trust-label">Works with any credit card or loan</div>
            <div class="trust-bar">
                <i class="fab fa-cc-visa" title="Visa"></i>
                <i class="fab fa-cc-mastercard" title="Mastercard"></i>
                <i class="fas fa-university" title="Banks & Overdrafts"></i>
                <i class="fas fa-file-invoice-dollar" title="Personal Loans"></i>
            </div>
        </div>
    </header>

    <div class="app-container">
        
        <!-- Left: Calculator Inputs -->
        <div class="card">
            <div class="card-header">
                <div class="card-title"><i class="fas fa-sliders-h" style="color:var(--primary)"></i> Configuration</div>
            </div>

            <div class="strategy-toggle">
                <div class="toggle-opt active" id="btn-snowball" onclick="setStrategy('snowball')">Snowball (Fast Wins)</div>
                <div class="toggle-opt" id="btn-avalanche" onclick="setStrategy('avalanche')">Avalanche (Save Money)</div>
            </div>

            <div id="debt-list" class="debt-list"></div>

            <button class="btn-add" onclick="addDebtRow()">+ Add another liability</button>

            <div class="slider-container">
                <div class="slider-header">
                    <label style="color:white; font-weight:600;">Monthly Extra Payment</label>
                    <span id="slider-val" style="color:var(--success); font-weight:700;">$200</span>
                </div>
                <input type="range" id="extra-pay-slider" min="0" max="2000" step="10" value="200" oninput="syncSlider(this.value)">
                <div style="margin-top:10px;">
                     <input type="number" id="extra-pay" value="200" oninput="syncInput(this.value)" style="background:#020617;">
                </div>
            </div>

            <button class="btn-primary" onclick="startCalculation()">Calculate Freedom Date</button>
        </div>

        <!-- Right: Analysis & Chart -->
        <div class="card" id="results-card">
            <canvas id="confetti"></canvas>
            
            <div id="loading-overlay">
                <div class="spinner"></div>
                <div style="margin-top:20px; font-weight:600; color:white;">Optimizing Payment Route...</div>
            </div>

            <div class="card-header">
                <div class="card-title"><i class="fas fa-chart-pie" style="color:var(--accent)"></i> Your Trajectory</div>
            </div>

            <div class="result-summary">
                <div>
                    <div class="freedom-sub">DEBT FREE BY</div>
                    <div class="freedom-date" id="final-date">--</div>
                </div>
                
                <div class="metric-grid">
                    <div class="metric-box metric-save">
                        Interest Saved
                        <span class="metric-val" id="val-saved">--</span>
                    </div>
                    <div class="metric-box metric-waste">
                        Interest Paid
                        <span class="metric-val" id="val-paid">--</span>
                    </div>
                </div>
            </div>

            <!-- Visual Comparison -->
            <div class="comparison-bar">
                <div class="bar-row">
                    <span style="color:var(--text-muted)">Minimum Payments Only</span>
                    <span style="color:var(--danger)" id="time-min-text">Forever (30+ Years)</span>
                </div>
                <div class="progress-track"><div class="progress-fill" style="width:100%; background:var(--border);"></div></div>
                
                <div class="bar-row">
                    <span style="color:white">Smart Strategy</span>
                    <span style="color:var(--success)" id="time-saved-text">--</span>
                </div>
                <div class="progress-track"><div id="progress-bar-smart" class="progress-fill" style="width:0%; background:var(--primary);"></div></div>
            </div>

            <!-- Dynamic Diagnosis -->
            <div id="diagnosis-box" class="diagnosis-box" style="display:none;"></div>

            <div class="chart-container">
                <canvas id="chart"></canvas>
            </div>
        </div>

        <!-- Bottom: Full Width Action Plan -->
        <div class="card full-width-card">
            <div class="card-header">
                <div class="card-title" style="font-size:1.1rem; color:white;">
                    <i class="fas fa-clipboard-check" style="color:var(--success)"></i> Your Monthly Action Plan
                </div>
            </div>
            
            <!-- NEW: Dynamic Strategy Explanation -->
            <div id="strategy-explainer" style="background:rgba(59, 130, 246, 0.1); border-left: 4px solid var(--primary); padding:15px; margin-bottom:20px; font-size:0.9rem; color:#dbeafe; border-radius:4px;">
                Loading strategy...
            </div>
            
            <div id="action-plan" class="plan-list"></div>
        </div>

    </div>

    <!-- SEO & Content Hub -->
    <div class="content-section">
        
        <div class="toc-box">
            <div class="toc-title">Table of Contents</div>
            <ul class="toc-list">
                <li><a href="#snowball-vs-avalanche">Snowball vs Avalanche Guide</a></li>
                <li><a href="#psychology">The Psychology of Debt</a></li>
                <li><a href="#consolidation">Consolidation & APR Tips</a></li>
                <li><a href="#glossary">Financial Terms Glossary</a></li>
                <li><a href="#faq">Frequently Asked Questions</a></li>
            </ul>
        </div>

        <h2 id="snowball-vs-avalanche">Strategic Debt Repayment Guide</h2>
        <p>Paying off debt is not just about math; it's about psychology and strategy. Clarity Decisions uses two institutional-grade algorithms to help you become debt-free.</p>
        
        <h3>Comparison: Snowball vs. Avalanche</h3>
        <p>Which method is right for you? Use this table to decide.</p>
        
        <table class="compare-table">
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Debt Snowball</th>
                    <th>Debt Avalanche</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Priority</strong></td>
                    <td>Smallest Balance First</td>
                    <td>Highest Interest Rate First</td>
                </tr>
                <tr>
                    <td><strong>Psychology</strong></td>
                    <td>High Motivation (Quick Wins)</td>
                    <td>Requires Discipline</td>
                </tr>
                <tr>
                    <td><strong>Math</strong></td>
                    <td>Costs slightly more</td>
                    <td>Saves maximum interest</td>
                </tr>
            </tbody>
        </table>

        <h2 id="psychology">The Psychology of Debt</h2>
        <p>Why do financial experts like Dave Ramsey recommend the Snowball method even though it's not mathematically perfect? Because humans are not calculators. When you pay off a small debt completely, your brain releases dopamine. This "win" motivates you to attack the next debt with more intensity. This phenomenon is critical for long-term adherence to a financial plan.</p>

        <h2 id="consolidation">How to Lower Your APR</h2>
        <p>If your interest rates are above 15%, you are fighting an uphill battle. You are effectively paying a "penalty" for being in debt. Before starting your snowball, consider these steps:</p>
        <ul>
            <li><strong>0% Balance Transfer Cards:</strong> Move high-interest debt to a card with a 0% introductory period (usually 12-18 months).</li>
            <li><strong>Personal Loan Consolidation:</strong> If you have multiple cards at 22%+, a single loan at 8% can save you thousands instantly.</li>
            <li><strong>Retention Calls:</strong> Call your credit card issuer and simply ask for a lower rate. It works 20% of the time.</li>
        </ul>

        <h2 id="glossary">Debt Destroyer Glossary</h2>
        <div class="glossary-item">
            <div class="glossary-term">Principal</div>
            <div>The original amount of money borrowed, excluding interest.</div>
        </div>
        <div class="glossary-item">
            <div class="glossary-term">APR (Annual Percentage Rate)</div>
            <div>The yearly cost of borrowing money, including fees and interest.</div>
        </div>
        <div class="glossary-item">
            <div class="glossary-term">Snowball Method</div>
            <div>A strategy where you pay minimums on all debts except the smallest one, which you attack with all available funds.</div>
        </div>

        <h2 id="faq">Frequently Asked Questions</h2>
        
        <div class="faq-item" onclick="this.classList.toggle('active')">
            <div class="faq-q">Is my data safe with Clarity? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-a">Yes. Unlike other tools, Clarity Decisions runs entirely in your web browser (Client-Side). We do not have a database, and we do not store or sell your financial information. Your data disappears the moment you close this tab.</div>
        </div>

        <div class="faq-item" onclick="this.classList.toggle('active')">
            <div class="faq-q">Can I include my mortgage? <i class="fas fa-chevron-down"></i></div>
            <div class="faq-a">Technically yes, but the Snowball method is designed for consumer debt (Credit Cards, Personal Loans, Overdrafts, Car Finance). Mortgages have such high balances that they stall the "Snowball" momentum. We recommend focusing on non-mortgage debt first.</div>
        </div>
        
    </div>

    <!-- Sticky Mobile Button -->
    <div class="mobile-cta">
        <button class="btn-primary" onclick="startCalculation()" style="box-shadow: 0 10px 30px rgba(0,0,0,0.8);">
            Calculate Now
        </button>
    </div>

    <footer>
        <div style="margin-bottom:10px;">&copy; 2026 Clarity Decisions.</div>
        <div style="opacity: 0.6;">
            This tool is for educational purposes only and does not constitute financial advice.
        </div>
    </footer>

    <script>
        // --- State ---
        // Defaults if no local storage
        let debts = [
            { name: 'Credit Card', bal: 1500, rate: 24.9, min: 45 },
            { name: 'Car Loan', bal: 6500, rate: 7.9, min: 180 },
            { name: 'Personal Loan', bal: 800, rate: 12.5, min: 50 }
        ];
        let strategy = 'snowball';
        let currency = '$'; // Default to USD
        let chartInstance = null;

        // --- Init ---
        function init() {
            loadData(); // Try to load from local storage
            renderList();
            setCurrencyUI();
            drawChart(['Start', 'End'], [0, 0]); 
            document.getElementById('final-date').innerText = "Ready?";
        }

        // --- Data Persistence ---
        function saveData() {
            const data = {
                debts: debts,
                strategy: strategy,
                currency: currency,
                extra: document.getElementById('extra-pay').value
            };
            localStorage.setItem('clarityData', JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem('clarityData');
            if(saved) {
                try {
                    const data = JSON.parse(saved);
                    if(data.debts) debts = data.debts;
                    if(data.strategy) strategy = data.strategy;
                    if(data.currency) currency = data.currency;
                    if(data.extra) {
                        document.getElementById('extra-pay').value = data.extra;
                        document.getElementById('extra-pay-slider').value = data.extra;
                    }
                    // Update Strategy UI
                    document.querySelectorAll('.toggle-opt').forEach(b => b.classList.remove('active'));
                    document.getElementById('btn-'+strategy).classList.add('active');
                } catch(e) { console.log('Save error', e); }
            }
        }

        // --- Currency Handling ---
        function setCurrency(c) {
            currency = c;
            setCurrencyUI();
            saveData();
            // Re-render list
            renderList();
            // Re-calc if results shown
            if(document.getElementById('final-date').innerText !== "Ready?") calculate();
        }

        function setCurrencyUI() {
            document.querySelectorAll('.curr-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            if(currency === '$') document.getElementById('curr-usd').classList.add('active');
            if(currency === '¬£') document.getElementById('curr-gbp').classList.add('active');
            if(currency === '‚Ç¨') document.getElementById('curr-eur').classList.add('active');
            
            const val = document.getElementById('extra-pay').value;
            document.getElementById('slider-val').innerText = currency + val;
        }

        // --- Layout Renderer ---
        function renderList() {
            const container = document.getElementById('debt-list');
            container.innerHTML = '';
            
            debts.forEach((d, i) => {
                const el = document.createElement('div');
                el.className = 'debt-row';
                el.innerHTML = `
                    <div class="input-col col-name">
                        <label>Liability</label>
                        <input type="text" value="${d.name}" onchange="updateDebt(${i}, 'name', this.value)">
                    </div>
                    <div class="input-col">
                        <label>Balance (${currency})</label>
                        <input type="number" inputmode="numeric" value="${d.bal}" onchange="updateDebt(${i}, 'bal', this.value)">
                    </div>
                    <div class="input-col">
                        <label>APR %</label>
                        <input type="number" inputmode="numeric" value="${d.rate}" onchange="updateDebt(${i}, 'rate', this.value)">
                    </div>
                    <div class="input-col">
                        <label>Min ${currency}</label>
                        <input type="number" inputmode="numeric" value="${d.min}" onchange="updateDebt(${i}, 'min', this.value)">
                    </div>
                    <button style="background:none; border:none; color:#ef4444; padding:0 0 10px 10px;" onclick="removeDebt(${i})">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                container.appendChild(el);
            });
        }

        function addDebtRow() { debts.push({name:'', bal:0, rate:0, min:0}); renderList(); saveData(); }
        function removeDebt(i) { debts.splice(i, 1); renderList(); saveData(); }
        function updateDebt(i, f, v) { 
            debts[i][f] = f === 'name' ? v : parseFloat(v)||0; 
            saveData(); 
        }
        
        function setStrategy(s) {
            strategy = s;
            document.querySelectorAll('.toggle-opt').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-'+s).classList.add('active');
            saveData();
            if(document.getElementById('final-date').innerText !== "Ready?") calculate();
        }

        function syncSlider(val) {
            document.getElementById('extra-pay').value = val;
            document.getElementById('slider-val').innerText = currency + val;
            saveData();
        }
        function syncInput(val) {
            document.getElementById('extra-pay-slider').value = val;
            document.getElementById('slider-val').innerText = currency + val;
            saveData();
        }

        // --- Calculation Core ---
        function startCalculation() {
            const overlay = document.getElementById('loading-overlay');
            overlay.style.display = 'flex';
            
            if(window.innerWidth < 960) {
                document.getElementById('results-card').scrollIntoView({behavior:'smooth'});
            }

            setTimeout(() => {
                calculate();
                overlay.style.display = 'none';
                fireConfetti();
            }, 800); 
        }

        function calculate() {
            // 1. Run Baseline Simulation (Minimum Payments Only)
            const baselineResults = simulateBaseline(debts);
            
            // 2. Run Strategy Simulation (With Extra Pay)
            const strategyResults = simulateStrategy(debts, strategy, parseFloat(document.getElementById('extra-pay').value) || 0);

            // 3. Update UI
            updateDashboard(baselineResults, strategyResults);
        }

        function simulateBaseline(originalDebts) {
            // Simulates paying only the minimums on each debt independently
            let totalInterest = 0;
            let maxMonths = 0;
            let neverPayoff = false;

            originalDebts.forEach(d => {
                let bal = d.bal;
                let rate = d.rate;
                let min = d.min;
                let months = 0;
                let interestAcc = 0;

                // Safety check for negative amortization
                if (bal * (rate/100/12) >= min && bal > 0) {
                    neverPayoff = true;
                    // Don't return here, process others to get a partial picture or flag whole sim
                }

                while(bal > 0 && months < 1200) { // 100 year cap
                    months++;
                    let interest = bal * (rate/100/12);
                    interestAcc += interest;
                    bal += interest;
                    
                    if(bal < min) { bal = 0; }
                    else { bal -= min; }
                }
                
                if(months >= 1200) neverPayoff = true;
                totalInterest += interestAcc;
                maxMonths = Math.max(maxMonths, months);
            });

            return { months: maxMonths, interest: totalInterest, never: neverPayoff };
        }

        function simulateStrategy(originalDebts, strat, extraMoney) {
            let list = JSON.parse(JSON.stringify(originalDebts));
            if (strat === 'snowball') list.sort((a,b) => a.bal - b.bal);
            else list.sort((a,b) => b.rate - a.rate);

            let totalInterest = 0;
            let months = 0;
            let totalPrincipal = list.reduce((a,b) => a+b.bal, 0);
            let history = [totalPrincipal];
            let labels = ['Start'];
            let highInterestFound = false;
            let highestRate = 0;

            while(totalPrincipal > 1 && months < 600) {
                months++;
                let avail = extraMoney;
                
                list.forEach(d => {
                    if(d.rate > 20) { highInterestFound = true; highestRate = Math.max(highestRate, d.rate); }
                    if(d.bal > 0) {
                        let interest = d.bal * (d.rate/100/12);
                        d.bal += interest;
                        totalInterest += interest; // Accumulate real interest paid in strategy
                        
                        let pay = d.min;
                        if(d.bal < pay) { pay = d.bal; d.bal = 0; avail += (d.min - pay); }
                        else { d.bal -= pay; }
                    } else { avail += d.min; } // Rollover
                });

                // Apply Extra to top priority
                for(let d of list) {
                    if(d.bal > 0) {
                        if(d.bal <= avail) { avail -= d.bal; d.bal = 0; }
                        else { d.bal -= avail; avail = 0; }
                    }
                }

                totalPrincipal = list.reduce((a,b) => a+b.bal, 0);
                history.push(totalPrincipal);
                
                let d = new Date(); d.setMonth(d.getMonth() + months);
                if(months % 4 === 0) labels.push(d.toLocaleString('default',{month:'short', year:'2-digit'}));
                else labels.push('');
            }

            return { months, interest: totalInterest, history, labels, highInterestFound, highestRate };
        }

        function updateDashboard(base, strat) {
            // Update Strategy Date
            let finalDate = new Date(); finalDate.setMonth(finalDate.getMonth() + strat.months);
            document.getElementById('final-date').innerText = finalDate.toLocaleString('default', { month: 'long', year: 'numeric' });
            document.getElementById('time-saved-text').innerText = `${Math.floor(strat.months/12)} Years, ${strat.months%12} Months`;

            // Update Baseline Text
            const baseText = document.getElementById('time-min-text');
            if (base.never) {
                baseText.innerText = "Never (Interest > Min Payment)";
                baseText.style.color = "var(--danger)";
            } else {
                baseText.innerText = `${Math.floor(base.months/12)} Years, ${base.months%12} Months`;
                baseText.style.color = "var(--text-muted)";
            }

            // Update Metrics
            document.getElementById('val-paid').innerText = currency + Math.floor(strat.interest).toLocaleString();
            
            // Real Savings Calculation
            let saved = 0;
            if (base.never) {
                document.getElementById('val-saved').innerText = "Infinite";
            } else {
                saved = Math.max(0, base.interest - strat.interest);
                document.getElementById('val-saved').innerText = currency + Math.floor(saved).toLocaleString();
            }

            // Progress Bar Visuals
            // Max width is defined by baseline (unless baseline is infinite, then strat is small %)
            let percent = 100;
            if (!base.never && base.months > 0) {
                percent = (strat.months / base.months) * 100;
            } else if (base.never) {
                percent = 10; // Visual approximation for "infinite"
            }
            document.getElementById('progress-bar-smart').style.width = Math.max(5, percent) + "%";

            // Diagnosis
            const diagBox = document.getElementById('diagnosis-box');
            diagBox.style.display = 'block';
            let diagText = `<strong>Financial Health Check:</strong> You have ${debts.length} active debts. By adding ${currency}${document.getElementById('extra-pay').value} monthly, you will become debt free in <strong>${strat.months} months</strong>. `;
            if(strat.highInterestFound) {
                diagText += `‚ö†Ô∏è <strong>Critical Alert:</strong> You have debt with ${strat.highestRate}% APR. This is an emergency. Prioritize this or look for a Balance Transfer immediately.`;
            } else {
                diagText += `Your plan is solid. Stick to the monthly payments below.`;
            }
            diagBox.innerHTML = diagText;

            // Render List & Chart
            renderActionPlan(strat);
            document.title = `Freedom in ${strat.months} Months! | Clarity Decisions`;
            drawChart(strat.labels, strat.history);
        }

        function renderActionPlan(strat) {
            let html = '';
            let extra = parseFloat(document.getElementById('extra-pay').value) || 0;
            let list = JSON.parse(JSON.stringify(debts));
            
            // Sort for display based on strategy
            if (strategy === 'snowball') list.sort((a,b) => a.bal - b.bal);
            else list.sort((a,b) => b.rate - a.rate);

            // Dynamic Explainer Text
            const explainer = document.getElementById('strategy-explainer');
            const focusName = list[0].name;
            if(strategy === 'snowball') {
                explainer.innerHTML = `<strong>Strategy: Snowball (Momentum).</strong> <br>We are focusing your entire ${currency}${extra} extra payment on <strong>${focusName}</strong> because it has the lowest balance. Eliminate it quickly to free up cash flow.`;
            } else {
                explainer.innerHTML = `<strong>Strategy: Avalanche (Math).</strong> <br>We are focusing your entire ${currency}${extra} extra payment on <strong>${focusName}</strong> because it has the highest interest rate. This saves you the most money mathematically.`;
            }

            list.forEach((d, i) => {
                let paymentAmount = d.min;
                let isFocus = (i === 0);
                let badge = '';
                let rowStyle = '';
                let amountStyle = 'color:var(--text-muted);';

                if (isFocus) {
                    paymentAmount = d.min + extra;
                    badge = `<span style="background:var(--success); color:#022c22; padding:2px 8px; border-radius:4px; font-size:0.7rem; font-weight:800; margin-left:10px; text-transform:uppercase;">Focus Debt</span>`;
                    rowStyle = `border: 1px solid var(--success); background: rgba(16, 185, 129, 0.05);`;
                    amountStyle = `color:var(--success); font-weight:800; font-size:1.1rem;`;
                }

                let alert = '';
                if(d.rate > 15) {
                    alert = `
                    <div class="affiliate-card">
                        <i class="fas fa-exclamation-triangle aff-icon"></i>
                        <div>
                            <div class="aff-content">High Rate (${d.rate}%). Consider a Balance Transfer.</div>
                        </div>
                    </div>`;
                }

                html += `
                    <div class="plan-step" style="flex-direction:column; gap:5px; ${rowStyle}">
                        <div style="display:flex; justify-content:space-between; align-items:center; width:100%;">
                            <div style="display:flex; gap:15px; align-items:center;">
                                <div class="step-num" style="${isFocus ? 'background:var(--success); color:#022c22; border:none;' : ''}">${i+1}</div>
                                <div>
                                    <strong style="color:white; font-size:0.95rem;">${d.name} ${badge}</strong>
                                    <div style="font-size:0.8rem; color:var(--text-muted);">${currency}${d.bal} Balance @ ${d.rate}%</div>
                                </div>
                            </div>
                            <div style="text-align:right;">
                                <div style="font-size:0.7rem; color:var(--text-muted); text-transform:uppercase;">Pay This Month</div>
                                <div style="${amountStyle}">${currency}${paymentAmount.toLocaleString()}</div>
                            </div>
                        </div>
                        ${alert}
                    </div>`;
            });
            document.getElementById('action-plan').innerHTML = html;
        }

        function drawChart(labels, data) {
            const ctx = document.getElementById('chart').getContext('2d');
            if(chartInstance) chartInstance.destroy();

            let gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, 'rgba(59, 130, 246, 0.5)');
            gradient.addColorStop(1, 'rgba(59, 130, 246, 0.0)');

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        borderColor: '#3b82f6',
                        backgroundColor: gradient,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: {display: false}, tooltip: {intersect: false, mode: 'index'} },
                    scales: {
                        x: { grid: {display: false}, ticks: {color: '#64748b', maxTicksLimit: 6} },
                        y: { grid: {color: '#1e293b'}, ticks: {color: '#64748b'} }
                    }
                }
            });
        }

        // Simple Confetti Implementation
        function fireConfetti() {
            const canvas = document.getElementById('confetti');
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.parentElement.offsetWidth;
            canvas.height = canvas.parentElement.offsetHeight;
            
            let particles = [];
            const colors = ['#3b82f6', '#06b6d4', '#10b981', '#f59e0b', '#ef4444'];
            
            for(let i=0; i<100; i++) {
                particles.push({
                    x: canvas.width/2, y: canvas.height/2,
                    vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10,
                    color: colors[Math.floor(Math.random()*colors.length)],
                    life: 100
                });
            }
            
            function animate() {
                ctx.clearRect(0,0,canvas.width,canvas.height);
                let alive = false;
                particles.forEach(p => {
                    if(p.life > 0) {
                        alive = true;
                        p.x += p.vx; p.y += p.vy; p.vy += 0.2; p.life--;
                        ctx.fillStyle = p.color; ctx.fillRect(p.x, p.y, 5, 5);
                    }
                });
                if(alive) requestAnimationFrame(animate);
                else ctx.clearRect(0,0,canvas.width,canvas.height);
            }
            animate();
        }

        window.onload = init;
    </script>
</body>
</html>